/* SPDX-License-Identifier: GPL-2.0-or-later */
/*
 * Microchip KSZ8863 register definitions
 *
 * Copyright (C) 2019 Pengutronix, Michael Grzeschik <kernel@pengutronix.de>
 */

#ifndef __KSZ8863_REG_H
#define __KSZ8863_REG_H

#define KSZ88_FAMILY_ID				0x88

#define CHIP_ID_63				0x30

#define KSZ8863_REG_SW_RESET			0x43

#define KSZ8863_GLOBAL_SOFTWARE_RESET		BIT(4)
#define KSZ8863_PCS_RESET			BIT(0)

#define KSZ8863_SW_TAIL_TAG_ENABLE		BIT(6)

#define KSZ8863_REG_POWER_MANAGEMENT		0xC3

#define KSZ8863_PORT_802_1P_REMAPPING		BIT(3)

#define KSZ8863_REG_PORT_STATUS_0		0x0E
#define KSZ8863_REG_PORT_STATUS_1		0x0F

#define KSZ8863_REG_IND_CTRL_0			0x79

#define KSZ8863_REG_IND_CTRL_1			0x7A

#define KSZ8863_REG_IND_DATA_8			0x7B
#define KSZ8863_REG_IND_DATA_7			0x7C
#define KSZ8863_REG_IND_DATA_6			0x7D
#define KSZ8863_REG_IND_DATA_5			0x7E
#define KSZ8863_REG_IND_DATA_4			0x7F
#define KSZ8863_REG_IND_DATA_3			0x80
#define KSZ8863_REG_IND_DATA_2			0x81
#define KSZ8863_REG_IND_DATA_1			0x82
#define KSZ8863_REG_IND_DATA_0			0x83

#define KSZ8863_REG_IND_DATA_CHECK		KSZ8863_REG_IND_DATA_8
#define KSZ8863_REG_IND_MIB_CHECK		KSZ8863_REG_IND_DATA_3
#define KSZ8863_REG_IND_DATA_HI			KSZ8863_REG_IND_DATA_7
#define KSZ8863_REG_IND_DATA_LO			KSZ8863_REG_IND_DATA_3

#define KSZ8863_ID_HI				0x0022
#define KSZ8863_ID_LO				0x1430

#define KSZ8863_TOTAL_PORT_NUM			3
#define KSZ8863_SWITCH_PORT_NUM			(KSZ8863_TOTAL_PORT_NUM - 1)

#define KSZ8863_COUNTER_NUM			0x20
#define TOTAL_KSZ8863_COUNTER_NUM		(KSZ8863_COUNTER_NUM + 2)

#define KSZ8863_P_LOCAL_CTRL			REG_PORT_CTRL_12
#define KSZ8863_P_REMOTE_STATUS			KSZ8863_REG_PORT_STATUS_0
#define KSZ8863_P_FORCE_CTRL			REG_PORT_CTRL_12
#define KSZ8863_P_NEG_RESTART_CTRL		REG_PORT_CTRL_13
#define KSZ8863_P_SPEED_STATUS			KSZ8863_REG_PORT_STATUS_1
#define KSZ8863_P_LINK_STATUS			KSZ8863_REG_PORT_STATUS_0
#define KSZ8863_S_TAIL_TAG_CTRL			REG_SW_CTRL_1

/**
 * STATIC_MAC_TABLE_ADDR		00-0000FFFF-FFFFFFFF
 * STATIC_MAC_TABLE_FWD_PORTS		00-00070000-00000000
 * STATIC_MAC_TABLE_VALID		00-00080000-00000000
 * STATIC_MAC_TABLE_OVERRIDE		00-00100000-00000000
 * STATIC_MAC_TABLE_USE_FID		00-00200000-00000000
 * STATIC_MAC_TABLE_FID			00-3C000000-00000000
 */

#define KSZ8863_STATIC_MAC_TABLE_ADDR		0x0000FFFF
#define KSZ8863_STATIC_MAC_TABLE_FWD_PORTS	0x00070000
#define KSZ8863_STATIC_MAC_TABLE_VALID		0x00080000
#define KSZ8863_STATIC_MAC_TABLE_OVERRIDE	0x00100000
#define KSZ8863_STATIC_MAC_TABLE_USE_FID	0x00200000
#define KSZ8863_STATIC_MAC_TABLE_FID		0x3C000000

#define KSZ8863_STATIC_MAC_FWD_PORTS_S		16
#define KSZ8863_STATIC_MAC_FID_S		22

/**
 * VLAN_TABLE_VID			00-00000000-00000FFF
 * VLAN_TABLE_FID			00-00000000-0000F000
 * VLAN_TABLE_MEMBERSHIP		00-00000000-00070000
 * VLAN_TABLE_VALID			00-00000000-00080000
 */

#define KSZ8863_VLAN_TABLE_VID			0x00FFF
#define KSZ8863_VLAN_TABLE_FID			0x0F000
#define KSZ8863_VLAN_TABLE_MEMBERSHIP		0x70000
#define KSZ8863_VLAN_TABLE_VALID		0x80000

#define KSZ8863_VLAN_TABLE_MEMBERSHIP_S		16

#define KSZ8863_DYNAMIC_MAC_TABLE_ADDR		0x0000FFFF
#define KSZ8863_DYNAMIC_MAC_TABLE_FID		0x000F0000
#define KSZ8863_DYNAMIC_MAC_TABLE_SRC_PORT	0x00300000
#define KSZ8863_DYNAMIC_MAC_TABLE_TIMESTAMP	0x00C00000
#define KSZ8863_DYNAMIC_MAC_TABLE_ENTRIES	0xF0000000

#define KSZ8863_DYNAMIC_MAC_TABLE_NOT_READY	0x80

#define KSZ8863_DYNAMIC_MAC_TABLE_ENTRIES_H	0x3F
#define KSZ8863_DYNAMIC_MAC_TABLE_MAC_EMPTY	0x80

#define KSZ8863_DYNAMIC_MAC_FID_S		16
#define KSZ8863_DYNAMIC_MAC_SRC_PORT_S		20
#define KSZ8863_DYNAMIC_MAC_TIMESTAMP_S		24
#define KSZ8863_DYNAMIC_MAC_ENTRIES_S		24
#define KSZ8863_DYNAMIC_MAC_ENTRIES_H_S		3

#define KSZ8863_MIB_COUNTER_OVERFLOW		BIT(7)
#define KSZ8863_MIB_COUNTER_VALID		BIT(6)

#define KSZ8863_MIB_PACKET_DROPPED_TX_0		0x100
#define KSZ8863_MIB_PACKET_DROPPED_RX_0		0x105

#define KSZ8863_REG_INT_ENABLE			0xBB
#define KSZ8863_REG_INT_STATUS			0xBC

#endif
